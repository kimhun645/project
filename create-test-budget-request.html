<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ó‡∏î‡∏™‡∏≠‡∏ö</title>
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2563eb;
            text-align: center;
            margin-bottom: 30px;
        }
        .button {
            background: #2563eb;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            display: inline-block;
            text-decoration: none;
        }
        .button:hover {
            background: #1d4ed8;
        }
        .success {
            background: #10b981;
        }
        .warning {
            background: #f59e0b;
        }
        .info {
            background: #6b7280;
            color: white;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
        .code-block {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            white-space: pre-wrap;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h1>
        
        <div class="info">
            <strong>üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á:</strong><br>
            ‚Ä¢ ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 3 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£<br>
            ‚Ä¢ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: PENDING (‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥)<br>
            ‚Ä¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô: 1,000 - 5,000 ‡∏ö‡∏≤‡∏ó<br>
            ‚Ä¢ ‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: 53010200, 53010300, 53010400
        </div>

        <button class="button" onclick="createTestData()">
            üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö
        </button>

        <button class="button warning" onclick="checkExistingData()">
            üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
        </button>

        <button class="button success" onclick="goToApprovalPage()">
            üìã ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Approval
        </button>

        <div id="result" style="margin-top: 20px;"></div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBqQZqQZqQZqQZqQZqQZqQZqQZqQZqQZqQ",
            authDomain: "stock-6e930.firebaseapp.com",
            projectId: "stock-6e930",
            storageBucket: "stock-6e930.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abcdef123456"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.createTestData = async function() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<div style="color: #f59e0b;">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö...</div>';

            try {
                const testRequests = [
                    {
                        request_no: 'BR-2024-001',
                        requester: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ',
                        request_date: '2024-01-15',
                        account_code: '53010200',
                        account_name: '‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ü‡πâ‡∏≤',
                        amount: 1500,
                        note: '‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°',
                        material_list: [
                            { name: '‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ü‡πâ‡∏≤', quantity: '1', unit: '‡πÄ‡∏î‡∏∑‡∏≠‡∏ô' }
                        ],
                        status: 'PENDING',
                        created_at: new Date().toISOString(),
                        updated_at: new Date().toISOString()
                    },
                    {
                        request_no: 'BR-2024-002',
                        requester: '‡∏ô‡∏≤‡∏á‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏±‡∏Å‡∏î‡∏µ',
                        request_date: '2024-01-16',
                        account_code: '53010300',
                        account_name: '‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏õ‡∏≤',
                        amount: 2500,
                        note: '‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏õ‡∏≤‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°',
                        material_list: [
                            { name: '‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏õ‡∏≤', quantity: '1', unit: '‡πÄ‡∏î‡∏∑‡∏≠‡∏ô' }
                        ],
                        status: 'PENDING',
                        created_at: new Date().toISOString(),
                        updated_at: new Date().toISOString()
                    },
                    {
                        request_no: 'BR-2024-003',
                        requester: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå ‡∏î‡∏µ‡πÉ‡∏à',
                        request_date: '2024-01-17',
                        account_code: '53010400',
                        account_name: '‡∏Ñ‡πà‡∏≤‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå',
                        amount: 3000,
                        note: '‡∏Ñ‡πà‡∏≤‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°',
                        material_list: [
                            { name: '‡∏Ñ‡πà‡∏≤‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå', quantity: '1', unit: '‡πÄ‡∏î‡∏∑‡∏≠‡∏ô' }
                        ],
                        status: 'PENDING',
                        created_at: new Date().toISOString(),
                        updated_at: new Date().toISOString()
                    }
                ];

                const budgetRequestsRef = collection(db, 'budgetRequests');
                const results = [];

                for (const request of testRequests) {
                    const docRef = await addDoc(budgetRequestsRef, request);
                    results.push({ id: docRef.id, ...request });
                }

                resultDiv.innerHTML = `
                    <div style="color: #10b981; background: #f0fdf4; padding: 15px; border-radius: 6px; margin: 10px 0;">
                        <strong>‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</strong><br>
                        ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${results.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£<br>
                        <div class="code-block">${JSON.stringify(results, null, 2)}</div>
                    </div>
                `;

            } catch (error) {
                console.error('Error creating test data:', error);
                resultDiv.innerHTML = `
                    <div style="color: #ef4444; background: #fef2f2; padding: 15px; border-radius: 6px; margin: 10px 0;">
                        <strong>‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:</strong><br>
                        ${error.message}
                    </div>
                `;
            }
        };

        window.checkExistingData = async function() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<div style="color: #f59e0b;">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>';

            try {
                const budgetRequestsRef = collection(db, 'budgetRequests');
                const querySnapshot = await getDocs(budgetRequestsRef);
                
                const requests = querySnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));

                resultDiv.innerHTML = `
                    <div style="color: #10b981; background: #f0fdf4; padding: 15px; border-radius: 6px; margin: 10px 0;">
                        <strong>üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà:</strong><br>
                        ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${requests.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£<br>
                        <div class="code-block">${JSON.stringify(requests, null, 2)}</div>
                    </div>
                `;

            } catch (error) {
                console.error('Error checking data:', error);
                resultDiv.innerHTML = `
                    <div style="color: #ef4444; background: #fef2f2; padding: 15px; border-radius: 6px; margin: 10px 0;">
                        <strong>‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:</strong><br>
                        ${error.message}
                    </div>
                `;
            }
        };

        window.goToApprovalPage = function() {
            window.open('https://stock-6e930.web.app/approval', '_blank');
        };
    </script>
</body>
</html>
